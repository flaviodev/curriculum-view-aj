<!-- @autor flaviodev - FlÃ¡vio de Souza - fdsdev@gmail.com 
     window for register profiles using the controller: CrudCtrl -->

<!-- @todo create a web component for reuse the window -->

<!-- this divs works how variables to set on controller 
     the path of project where the services will be invoked,
     the crud services to obtain objects to table
     and de html componets names for manipulation. Attention:       
     dont change the id of the div and custom attribuites names.
 -->
<div id="Crud" ng-controller="CrudCtrl"
     data-ttm-control-service="curriculum-control-php"
     data-ttm-entity="Profile" data-ttm-entity-name="Profile">

	<div id='message-area'>
		<span id="message-status"></span>
	</div>
	
	<div id='edition-area' class="container">
	
		<div id='update-title' ng-show="updating_mode">Updating Profile (Id:{{Profile.id}})</div>
	
		<form id='edtition-form' name='editForm' ng-show="edition_state" novalidate 
		      ng-submit="creating_mode ? createObject(Profile) : updateObject(Profile)">
			
			<!-- Edition fields form -->
			Name: <input type="text" name='name' ng-minlength='4' ng-maxlength='100' class="form-control" show-focus="edition_state"  ng-model="Profile.name" required >
			<div class='required-field' ng-show="editForm.name.$error.required">* Name is required</div>
			<div class='required-field' ng-show="editForm.name.$error.minlength">* Name must be at least 4 characters</div>
			<div class='required-field' ng-show="editForm.name.$error.maxlength">* Name can be a maximum of 100 characters</div>
			
			Date of Birth: <input type="date" name='dateOfBirth' placeholder="YYYY-MM-DD" class="form-control" ng-model="Profile.dateOfBirth" required>
			<div class='required-field' ng-show="editForm.dateOfBirth.$error.required">* Date of Birth is required</div>
			
			Document: <input type="text" name='document' ng-pattern="/^[0-9]+$/" class="form-control" ng-model="Profile.document" required>
			<div class='required-field' ng-show="editForm.document.$error.required">* Document is required</div>
			<div class='required-field' ng-show="editForm.document.$error.pattern">* Document must have only numeric characters</div>
			
		    <div id='update-buttons' ng-show="updating_mode">
				<!-- action to update the register on data base -->
				<button type="submit" class="btn btn-success" ng-disabled='editForm.$invalid' >Update</button>
										
				<!-- action to reset the form -->
				<button type="button" class="btn btn-default" ng-click="cancelEdition()">Cancel</button>
			</div>
	
			<div id='save-buttons' ng-show="creating_mode">
				<!-- action to create a new register on data base -->
				<button  type="submit" class="btn btn-success" ng-show="creating_mode" ng-disabled='editForm.$invalid'>Save</button>
						
				<!-- action to reset the form -->
				<button type="button" class="btn btn-default" ng-click="cancelEdition()">Cancel</button>
			</div>
		</form>
	</div>

	<div id='table-area' class='container'>
	
		<div id='new-button' ng-show="view_state">
			<button class="btn btn-primary"  ng-click="newObject()">+ New Profile</button>
		</div>
	
		<table id="registers-table" cellspacing="0" class="table table-striped" 
		    ng-table="tableParams" show-filter="true" data-init-sortby="name:asc">
			<tr ng-repeat="Profile in $data">
				<!-- register fields table form -->
				<td title="'id'" style="width:3%">{{Profile.id }}</td>
				<td title="'Name'" sortable="'name'"  filter="{name: 'text'}" >{{Profile.name | captalize }}</td>
				<td title="'Document'" sortable="'document'"  filter="{document: 'text'}" style="width:25%" >{{Profile.document }}</td>
				<td title="'Date of Birth'" sortable="'dateOfBirth'" style="width:15%">{{Profile.dateOfBirth.date | date }}</td>
				
				<td style="width:3%">
					<button id='button-load' type="button" class="btn btn-warning" ng-click="loadObject(Profile)">
					   <span class="glyphicon glyphicon-pencil"></span>
					</button>
				</td>
				
				<td style="width:3%">
					<button id='button-delete' type="button" class="btn btn-danger" ng-click="showDeleteConfirm(Profile)">
					   <span class="glyphicon glyphicon-remove-circle"></span>
					</button>
				</td>
			</tr>
		</table>
	</div>
</div>